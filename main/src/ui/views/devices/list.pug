extends ../layout

block content
  if clients.length === 0
    p.text-muted No devices currently connected.
  else
    .table-responsive
      table.table.table-striped.table-hover
        thead
          tr
            th Name
            th.d-none.d-md-table-cell IP
            th VPN
        tbody
          each client in clients
            - const vpnOn = !!client.policy
            tr
              td
                div= client.name
                small.d-md-none.text-muted= client.ip
              td.d-none.d-md-table-cell= client.ip
              td
                .d-flex.gap-1
                  form(method="POST" action="/devices/toggle-vpn" style="display:inline")
                    input(type="hidden" name="mac" value=client.mac)
                    input(type="hidden" name="policyId" value="")
                    button.btn.btn-sm(type="submit" class=(!vpnOn ? 'btn-secondary' : 'btn-outline-secondary')) Off
                  each policy in connectionPolicies
                    form(method="POST" action="/devices/toggle-vpn" style="display:inline")
                      input(type="hidden" name="mac" value=client.mac)
                      input(type="hidden" name="policyId" value=policy.id)
                      button.btn.btn-sm(type="submit" class=(client.policy === policy.id ? 'btn-primary' : 'btn-outline-primary'))= policy.description || policy.name
