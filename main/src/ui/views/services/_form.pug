if error
  .alert.alert-danger(role='alert')= error

.mb-3
  label.form-label(for='name') Service Name:
  input#name.form-control(type='text' name='name' value=service.name required)

.mb-3
  label.form-label(for='interfaces') Interface
  select#interfaces.form-select(name='interfaces' required)
    each iface in interfaces
      - const isSelected = service.interfaces && service.interfaces.length > 0 ? (service.interfaces.includes(iface.name) || service.interfaces.includes(iface.id)) : false
      option(value=iface.name selected=isSelected)
        if !iface.connected
          = `⚠️ ${iface.name} (NOT CONNECTED)`
        else
          = iface.name
  if invalidInterface
    .alert.alert-warning.mt-2(role='alert')
      strong Warning:
      | The previously selected interface "#{invalidInterface}" is no longer available. First available interface has been pre-selected.

.mb-3
  label.form-label(for='matchingDomains') Matching Domains (comma-separated)
  .form-text.mb-2 *.domain.com will match domain.com and all subdomains.
  textarea#matchingDomains.form-control(name='matchingDomains' rows='3')= Array.isArray(service.matchingDomains) ? service.matchingDomains.join(', ') : service.matchingDomains
  .form-text Example: "google.com, *.example.com"

.mb-3.form-check
  input#optimizeRoutes.form-check-input(type='checkbox' name='optimizeRoutes' checked=service.optimizeRoutes)
  label.form-check-label(for='optimizeRoutes') Optimize Routes
  .form-text Automatically consolidate host routes into network routes (max /22 subnet)

.d-flex.gap-2.mt-4
  button.btn.btn-primary(type='submit')= service.id ? 'Update Service' : 'Create Service'
  a.btn.btn-secondary(href=service.id ? `/services/${service.id}` : '/services') Cancel
